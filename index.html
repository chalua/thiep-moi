<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Thi·ªáp M·ªùi T·ªët Nghi·ªáp</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="/assert/Logo-School.png" type="image/png">
    <link rel="stylesheet" href="thiep-moi.css">
</head>
<body>
   
      
    <div class="book-container">
        <div class="book" id="book">
            <!-- B√¨a s√°ch (gi·ªØ nguy√™n) -->
            <div class="book-cover" id="bookCover">
                <img src="assert/Logo-School-removebg-preview.png" alt="Logo tr∆∞·ªùng" class="school-logo">
                <h1>THI·ªÜP M·ªúI D·ª∞ T·ªêT NGHI·ªÜP</h1>
                <div class="decorative-line"></div>
                <h2>ƒê·∫†I H·ªåC C√îNG TH∆Ø∆†NG TP. H·ªí CH√ç MINH</h2>

                <div class="decoration-icon">
                    <img src="assert/graduation-cap-education-symbol-vector-removebg-preview.png" alt="M≈© t·ªët nghi·ªáp">
                </div>
                <div>2025</div>

                <!-- D√≤ng ch·ªØ c√° nh√¢n h√≥a -->
                <div class="personal-message">
                    <p>Tr√¢n tr·ªçng k√≠nh m·ªùi gia ƒë√¨nh v√† b·∫°n b√®</p>
                    <p>ƒë·∫øn chia vui c√πng t√¥i trong ng√†y tr·ªçng ƒë·∫°i</p>
                </div>
                
                <!-- G√≥c trang tr√≠ -->
                <!-- <div class="corner-decor top-left"></div>
                <div class="corner-decor top-right"></div>
                <div class="corner-decor bottom-left"></div>
                <div class="corner-decor bottom-right"></div> -->
            </div>
            
            
             <!-- Trang 1 -->
             <div class="page page-left">
                <div class="page-content">
                    <div class="corner-decoration top-left"></div>
                    <div class="corner-decoration bottom-right"></div>
                    <div class="response-section-2">
                    <div style="display: flex;">
                        <img src="assert/z6489101642440_9c9747a9098b432d8d6bc6439ca327e9.jpg" alt="·∫¢nh t·ªët nghi·ªáp" class="graduate-photo">
                        <!-- <img src="https://via.placeholder.com/200x200" alt="·∫¢nh t·ªët nghi·ªáp" class="graduate-photo"> -->
                    </div>
                    <h2 class="graduate-name">HU·ª≤NH THANH NH√É</h2>
                    
                    <div class="graduation-info">
                        <p><strong>Ng√†y t·ªët nghi·ªáp:</strong> 24/04/2025</p>
                        <p><strong>Th·ªùi gian:</strong> 08:00 - 11:00</p>
                        <p><strong>Li√™n h·ªá:</strong> 0354069220 - Zalo - Facebook</p>
                        <p><strong>ƒê·ªãa ƒëi·ªÉm:</strong> Tr∆∞·ªùng ƒê·∫°i h·ªçc C√¥ng Th∆∞∆°ng TP. H·ªì Ch√≠ Minh</p>
                    </div>
                </div>
                <!-- <div class="drag-hint" style="right: 20px; bottom: 20px;">‚Üí</div>
                <button class="flip-btn next-btn" onclick="turnPage(1)">‚Üí</button>
                <div class="drag-hint" style="right: 20px; bottom: 20px;">‚Üí</div>
                <button class="flip-btn prev-btn" onclick="turnPage(-1)">‚Üí</button> -->
                </div>
                <div class="page-flip-area right-flip-area" onclick="turnPage(1)"></div>
            </div>

            <!-- Trang 2 -->
            <div class="page page-left">
                <div class="page-content">
                    <div class="corner-decoration top-left"></div>
                    <div class="corner-decoration bottom-right"></div>
                    <div class="response-section-3">
                    <div class="location-card">
                        <div class="invitation-details">
                            <div class="detail-item" style="width: 485px;">
                                <div class="detail-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div>
                                    <h5><b>Th·ªùi gian</b></h5>
                                    <p><i>08:00 - 11:00, Th·ª© NƒÉm <br>ng√†y 24/04/2025</i></p>
                                </div>
                            </div>
                            
                            <div class="detail-item">
                                <div class="detail-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div>
                                    <h5><b>ƒê·ªãa ƒëi·ªÉm</b></h5>
                                    <p><i>S√¢n Tr∆∞·ªùng - Tr∆∞·ªùng ƒê·∫°i h·ªçc C√¥ng Th∆∞∆°ng TP. H·ªì Ch√≠ Minh.</i></p>
                                </div>
                            </div>
                        </div>
                        <div class="map-container" id="map">
                            <iframe width="100%" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?width=100%25&amp;height=600&amp;hl=en&amp;q=140%20%C4%90.%20L%C3%AA%20Tr%E1%BB%8Dng%20T%E1%BA%A5n,%20T%C3%A2y%20Th%E1%BA%A1nh,%20T%C3%A2n%20Ph%C3%BA,%20H%E1%BB%93%20Ch%C3%AD%20Minh,%20Vi%E1%BB%87t%20Nam+(H%E1%BB%93%20c%C3%A1%20Koi%20Tr%C6%B0%E1%BB%9Dng%20%C4%90%E1%BA%A1i%20h%E1%BB%8Dc%20C%C3%B4ng%20Th%C6%B0%C6%A1ng%20TP.HCM)&amp;t=&amp;z=17&amp;ie=UTF8&amp;iwloc=B&amp;output=embed"><a href="https://www.gps.ie/collections/drones/">buy drones</a></iframe>
                        </div>
                    </div>
                </div>
                    <!-- <div class="drag-hint" style="right: 20px; bottom: 20px;">‚Üí</div>
                    <button class="flip-btn next-btn" onclick="turnPage(1)">‚Üí</button>
                    <div class="drag-hint" style="right: 20px; bottom: 20px;">‚Üí</div>
                    <button class="flip-btn prev-btn" onclick="turnPage(-1)">‚Üí</button> -->
                </div>
                <div class="page-flip-area right-flip-area" onclick="turnPage(1)"></div>
                <div class="page-flip-area left-flip-area" onclick="turnPage(-1)"></div>
            </div>

            <!-- Trang 3  -->
            <div class="page page-right">
                <div class="page-content">
                    <div class="corner-decoration top-left"></div>
                    <div class="corner-decoration bottom-right"></div>
                    <div class="message">
                        <p>Ch·∫∑ng ƒë∆∞·ªùng ƒë·∫°i h·ªçc c·ªßa m√¨nh ƒë√£ kh√©p l·∫°i, m·ªü ra m·ªôt h√†nh tr√¨nh m·ªõi ƒë·∫ßy th·ª≠ th√°ch v√† c∆° h·ªôi. Nh√¨n l·∫°i qu√£ng th·ªùi gian tuy ng·∫Øn nh∆∞ng v√¥ c√πng √Ω nghƒ©a, m√¨nh tr√¢n tr·ªçng t·ª´ng kho·∫£nh kh·∫Øc n·ªó l·ª±c, tr∆∞·ªüng th√†nh v√† nh·ªØng b√†i h·ªçc qu√Ω gi√°. Xin ch√¢n th√†nh c·∫£m ∆°n th·∫ßy c√¥, gia ƒë√¨nh, anh ch·ªã v√† b·∫°n b√® ƒë√£ lu√¥n ƒë·ªìng h√†nh, h·ªó tr·ª£ ho√†n th√†nh m·ª•c ti√™u d·ª± ki·∫øn. Ch√¢n th√†nh c·∫£m ∆°n!.</p>
                    </div>
                    <div class="response-section">
                        <h4 class="graduate-name" style="margin-bottom: 30px;">M·ªçi Ng∆∞·ªùi C√≥ Th·ªÉ ƒê·∫øn Ch·ª•p 1 B·ª©c ·∫¢nh K·ªâ Ni·ªám V·ªõi M√¨nh Kh√¥ng</h4>
                        
                        <div class="response-buttons">
                            <button for="btnAttend" class="btn-response btn-attend" id="btnAttend" name="attending" value="yes">
                                ‚ù§Ô∏è C√≥, ƒë∆∞∆°ng nhi√™n r·ªìi.
                            </button>
                            
                            <button for="btnDecline" class="btn-response btn-decline" id="btnDecline" name="attending" value="no">
                                ü§î Hmmmm, m√¨nh s·∫Ω c·ªë g·∫Øng s·∫Øp x·∫øp.
                            </button>
                        </div>
                        
                        <div class="wish-form" id="wishForm">
                            <!-- <div>Nh√¢n di·ªáp L·ªÖ T·ªët Nghi·ªáp, h√£y g·ª≠i cho m√¨nh l·ªùi ch√∫c nhe</div> -->
                            <input type="text" class="form-control" id="name" placeholder="B·∫°n l√† ai ? Cho m√¨nh bi·∫øt t√™n nhen !!!">
                            <textarea class="form-control" id="wishMessage" rows="3" placeholder="N∆°i nh·∫≠p l·ªùi ch√∫c n√® ..."></textarea>
                            <div class="text-center">
                                <button class="btn-send" id="btnSendWish">
                                    <i class="fas fa-paper-plane me-2"></i> G·ª≠i l·ªùi ch√∫c
                                </button>
                            </div>
                        </div>
                        
                        <div class="confirmation-message" id="confirmationMessage">
                            <i class="fas fa-check-circle me-2"></i>
                            <span id="responseMessage">C·∫£m ∆°n b·∫°n ƒë√£ ph·∫£n h·ªìi!</span>
                        </div>
                    </div>
                    
                    <!-- <div class="drag-hint" style="right: 20px; bottom: 20px;">‚Üê</div>
                    <button class="flip-btn prev-btn" onclick="turnPage(-1)">‚Üê</button> -->
                </div>
                <div class="page-flip-area left-flip-area" onclick="turnPage(-1)"></div>
            </div>

         
           

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const book = document.getElementById('book');
        const bookCover = document.getElementById('bookCover');
        let currentPage = 1;
        const totalPages = 3; 
        let isBookOpen = false;
        let isDragging = false;
        let startX = 0;
        let currentX = 0;
        let lastDragTime = 0;
        
        // M·ªü s√°ch khi click v√†o b√¨a
        bookCover.addEventListener('click', function() {
            if (!isBookOpen) {
                openBook();
            }
        });

        bookCover.addEventListener('touchmove', function() {
            if (!isBookOpen) {
                openBook();
            }
        });
        
        // M·ªü s√°ch
        function openBook() {
            book.classList.add('open');
            isBookOpen = true;
        }
        
        // ƒê√≥ng s√°ch
        function closeBook() {
            book.classList.remove('open');
            // X√≥a t·∫•t c·∫£ c√°c l·ªõp turn-page-*
            for (let i = 1; i < totalPages; i++) {
                book.classList.remove('turn-page-' + i);
            }
            currentPage = 1;
            isBookOpen = false;
        }
        
        // L·∫≠t trang (c·∫£i ti·∫øn)
        function turnPage(direction) {
            const now = Date.now();
            if (now - lastDragTime < 500) return; // Ch·ªëng spam l·∫≠t trang
            lastDragTime = now;
            
            if (!isBookOpen && direction > 0) {
                openBook();
                return;
            }
            
            if (direction > 0 && currentPage >= totalPages) return;
            if (direction < 0 && currentPage <= 1) {
                if (currentPage === 1) {
                    closeBook();
                    return;
                }
            }
            
            currentPage += direction;
            
            // Reset t·∫•t c·∫£ c√°c l·ªõp tr·∫°ng th√°i
            book.className = 'book';
            if (isBookOpen) book.classList.add('open');
            
            // Th√™m l·ªõp tr·∫°ng th√°i m·ªõi cho t·∫•t c·∫£ c√°c trang ƒë√£ l·∫≠t
            for (let i = 1; i < currentPage; i++) {
                book.classList.add('turn-page-' + i);
            }
        }
        
        // X·ª≠ l√Ω k√©o chu·ªôt ƒë·ªÉ l·∫≠t trang (c·∫£i ti·∫øn m∆∞·ª£t m√† h∆°n)
        book.addEventListener('mousedown', startDrag);
        book.addEventListener('touchstart', startDrag, { passive: false });
        
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag, { passive: false });
        
        document.addEventListener('mouseup', endDrag);
        document.addEventListener('touchend', endDrag);
        
        function startDrag(e) {
    const target = e.target;
    const isInputElement = target.tagName === 'INPUT' || 
                          target.tagName === 'TEXTAREA' || 
                          target.tagName === 'BUTTON' ||
                          target.isContentEditable;
    
    if (!isBookOpen || isInputElement) return;
    
    isDragging = true;
    startX = e.clientX || e.touches[0].clientX;
    currentX = startX;
    e.preventDefault();
}

// Thay ƒë·ªïi h√†m drag t∆∞∆°ng t·ª±
function drag(e) {
    const target = e.target;
    const isInputElement = target.tagName === 'INPUT' || 
                          target.tagName === 'TEXTAREA' || 
                          target.tagName === 'BUTTON' ||
                          target.isContentEditable;
    
    if (!isDragging || isInputElement) return;
    
    const x = e.clientX || e.touches[0].clientX;
    const deltaX = x - currentX;
    currentX = x;
    
    if (Math.abs(deltaX) > 5) {
        if (deltaX > 0) {
            turnPage(-1);
        } else {
            turnPage(1);
        }
        endDrag();
    }
}
        
        function endDrag() {
            isDragging = false;
        }
        
        // Hi·ªáu ·ª©ng khi load trang
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                book.style.transition = 'transform 1s ease';
            }, 500);
        });
    </script>
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
      
        const supabase = createClient('https://ozvvceemcughejdcjxhp.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96dnZjZWVtY3VnaGVqZGNqeGhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ2MzM2NDksImV4cCI6MjA2MDIwOTY0OX0.DdABOEjLQqIyKoNb4f_ONIcrLO7OOgWmvVpDiJRxqhQ');
    
        // Bi·∫øn l∆∞u tr·∫°ng th√°i tham d·ª±
        let isAttending = null;
        const btnAttend = document.getElementById('btnAttend');
        const btnDecline = document.getElementById('btnDecline');
        const wishForm = document.getElementById('wishForm');
        const confirmationMessage = document.getElementById('confirmationMessage');
        const responseMessage = document.getElementById('responseMessage');
    
        // X·ª≠ l√Ω s·ª± ki·ªán click n√∫t Tham d·ª±
        btnAttend.addEventListener('click', function() {
            isAttending = true;
            this.classList.add('active');
            btnDecline.classList.remove('active');
            
            // responseMessage.textContent = 'C·∫£m ∆°n b·∫°n ƒë√£ x√°c nh·∫≠n tham d·ª±!';
            // confirmationMessage.style.display = 'block';
            // wishForm.style.display = 'block';
            
            confirmationMessage.style.backgroundColor = 'rgba(40, 167, 69, 0.1)';
            confirmationMessage.style.color = '#28a745';
        });
        
        // X·ª≠ l√Ω s·ª± ki·ªán click n√∫t Kh√¥ng tham d·ª±
        btnDecline.addEventListener('click', function() {
            isAttending = false;
            this.classList.add('active');
            btnAttend.classList.remove('active');
            
            // responseMessage.textContent = 'C·∫£m ∆°n b·∫°n ƒë√£ ph·∫£n h·ªìi. R·∫•t ti·∫øc v√¨ b·∫°n kh√¥ng th·ªÉ tham d·ª±!';
            // confirmationMessage.style.display = 'block';
            // wishForm.style.display = 'block';
            
            confirmationMessage.style.backgroundColor = 'rgba(40, 167, 69, 0.1)';
            confirmationMessage.style.color = '#28a745';
        });
    
        // X·ª≠ l√Ω g·ª≠i form
        document.getElementById('btnSendWish').addEventListener('click', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const message = document.getElementById('wishMessage').value.trim();
            
            if (!name) {
                alert('Vui l√≤ng nh·∫≠p t√™n c·ªßa b·∫°n!');
                return;
            }
            
            if (isAttending === null) {
                alert('Vui l√≤ng ch·ªçn tr·∫°ng th√°i tham d·ª±!');
                return;
            }
            
            try {
                const { data, error } = await supabase
                    .from('invite')
                    .insert([{ 
                        name, 
                        message, 
                        is_attending: isAttending 
                    }]);
                
                if (error) throw error;
                
                // Chuy·ªÉn h∆∞·ªõng sang trang c·∫£m ∆°n v·ªõi th√¥ng b√°o ph√π h·ª£p
                window.location.href = `thiep-moi/thankyou.html?response=${isAttending ? 'yes' : 'decline'}`;
                
            } catch (error) {
                console.error('L·ªói khi g·ª≠i d·ªØ li·ªáu:', error);
                alert('C√≥ l·ªói x·∫£y ra khi g·ª≠i ph·∫£n h·ªìi. Vui l√≤ng th·ª≠ l·∫°i!');
            }
        });
    </script>
</body>
</html>